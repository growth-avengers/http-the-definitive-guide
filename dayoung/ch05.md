# ch05. 웹 서버
웹 서버
* HTTP, TCP 처리를 구현한 것. 
  * 다목적 소프트웨어 웹서버 : 표준 컴퓨터 시스템에 설치하고 실행(아파치, nginx 등)
  * 임베디드 웹서버 : 소비자용 제품에 내장되는 작은 웹서버.
* `perl` : HTTP 디버깅용 최소기능의 웹서버

웹서버가 하는 일
1. 커넥션을 맺는다
   * keep-alive 커넥션이 아니면 새 커넥션을 맺어야 함
   * 웹서버는 어떤 커넥션이던 맘대로 닫을 수 있다.
   * 역방향 DNS를 통해 클라이언트 IP 주소를 반환 -> 호스트명을 변환해오는 과정이 성능 저하를 야기할 수 있기 때문에 꺼놓거나 특정 콘텐츠에 대해서만 켜놓음
   * ident 프로토콜을 통해 사용자 식별 -> 마찬가지로 성능 이슈로 주로 조직 내부에서만 사용
2. 요청을 받는다
   * 요청줄에서 메서드,식별자(URI), 버전번호 찾고 CRLF로 끝남. 메세지 헤더도 CRLF로 끝남. 요청본문이 있다면 읽음(content-lenght 로 요청본문 길이 확인)
   * 대량의 커넥션을 지원하기 위해 멀티스레딩을 지원하기도.. -> 하드웨어 이슈로 상한전 제한
   * 다중IO서버, 다중멀티스레드서버
3. 요청을 처리한다
4. 리소스에 접근한다
   * 문서루트(docroot)로 문서를 찾음 (url 뒤에 붙는거 `/usr/asdf/gigig.gif`)
   * URI를 동적리스소에 매핑할수도 있음
5. 응답을 만든다 
   * 응답메세지(Content-Type, Content-Lenght, 실제 내용)
   * MIME 타입(content-type)결정 -> 확장자 이름, 유형 등
   * 리다이렉션(3xx) -> 리소스가 옮겨진 경우 용이
6. 응답을 보낸다
   * 커넥션 상태 추적하여 메세지 전송
7. 트랜잭션을 로그로 남긴다

## Q)
* 서버가 클라이언트의 호스트명을 알아내는 과정을 설명해주세요
* 요청 본문 표기는 CRLF로 끝내지 않고 content-length로 정의하는 이유가 있을까요?