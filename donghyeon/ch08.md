# ch08. 통합점: 게이트웨이, 터널, 릴레이

- 게이트웨이: 서로 다른 프로토콜과 애플리케이션의 간의 HTTP 인터페이스
  - 리소스와 애플리케이션을 연결
  - HTTP 트래픽을 다른 프로토콜로 자동으로 변환, HTTP 클라이언트가 다른 프로토콜을 알 필요 없이 서버에 접속할 수 있게 함.
  - `<클라이언트 프로토콜>/<서버 프로토콜>` 형태로 표시
  - 일반적인 게이트웨이의 종류
    - HTTP/\*: 서버 측 웹 게이트웨이
      - 클라이언트의 HTTP 요청이 원 서버 영역으로 들어오는 시점에 다른 프로토콜로 전환
      - 응답은 HTTP 응답
    - HTTP/HTTPS: 서버 측 보안 게이트웨이
      - 내부의 모든 웹 요청을 암호화
      - 클라이언트는 일반 HTTP를 사용해 웹 탐색하지만 게이트웨이는 자동으로 모든 세션을 암호화
    - HTTPS/HTTP: 클라이언트 측 보안 가속 게이트웨이
      - 보안 가속기
      - 웹 서버의 앞단에 위치하여 보이지 않는 인터셉트 게이트웨이나 리버스 프락시 역할
      - 보안 HTTPS 트래픽을 복호화하고 웹 서버에 HTTP 요청
      - 게이트웨이와 서버 간의 네트워크가 안전한지 파악
  - 공용 게이트웨이 인터페이스(Common Gateway Interface, CGI): 최초의 서버 확장
- 터널: HTTP 커넥션을 통해 HTTP가 아닌 트래픽 전송
  - HTTP의 CONNECT 메서드를 사용해 커낵션을 맺음
  - 터널을 통하는 데이터는 게이트웨이에서 볼 수 없기 때문에 패킷의 순서, 흐름에 대해 어떤 가정도 할 수 없음
  - 클라이언트는 성능을 높이기 위해 CONNECT 요청의 응답이 오기 전에 터널 데이터를 전송
  - 게이트웨이가 CONNECT 요청에 이어서 데이터를 적절하게 처리할 수 있어야함
  - 클라이언트는 인증 요구나 200외의 응답이 왔을 때 요청 데이터를 다시 보낼 준비를 해야함
  - SSL 터널링
    - 터널을 사용하면 SSL 트래픽을 HTTP 커넥션으로 전송해 80 포트의 HTTP 만을 허용하는 방화벽을 통과할 수 있음
    - 하지만 이는 악의적인 트래픽이 유입되는 경로가 될 수도 있음
- 릴레이: 단순한 HTTP 프락시. 한 번에 한 개의 홉에 데이터를 전달
  - HTTP 명세를 완전히 준수하지 않음
  - 커넥션을 맺기 위한 HTTP 통신을 한 다음, 무작정 트래픽을 전달
  - 여러가지 문제점이 발생할 수 있으므로 HTTP를 제대로 준수하는 프락시를 사용하자
